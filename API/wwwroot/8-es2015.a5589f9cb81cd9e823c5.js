(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{jkDv:function(e,t,c){"use strict";c.r(t),c.d(t,"AdminModule",(function(){return X}));var n=c("ofXK"),i=c("PCNd"),r=c("tyNb"),o=c("fXoL"),s=c("3Pt+"),b=c("AytR"),d=c("lJxs"),a=c("tk/3"),l=c("mwRl");let u=(()=>{class e{constructor(e,t){this.http=e,this.shopService=t,this.baseUrl=b.a.apiUrl}getProducts(){return this.http.get(this.baseUrl+"admin/products")}createProduct(e){return this.http.post(this.baseUrl+"admin/create-product",e).pipe(Object(d.a)(e=>{e&&this.shopService.products.push(e)}))}updateProduct(e,t){return this.http.put(this.baseUrl+"admin/edit-product/"+e,t)}deleteProduct(e){return this.http.delete(this.baseUrl+"admin/product/"+e)}getUsers(){return this.http.get(this.baseUrl+"admin/users")}updateUserRoles(e,t){return this.http.post(this.baseUrl+"admin/edit-roles/"+e+"?roles="+t,{})}deleteUser(e){this.http.delete(this.baseUrl+"admin/user/"+e).subscribe(e=>{})}getBrands(){return this.shopService.getBrands()}getTypes(){return this.shopService.getTypes()}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(a.b),o.Xb(l.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=c("44PX"),m=c("6nud"),h=c("K3ix");function f(e,t){if(1&e&&(o.Tb(0,"div",11),o.Tb(1,"input",12),o.bc("change",(function(){const e=t.$implicit;return e.checked=!e.checked})),o.Sb(),o.Tb(2,"label"),o.Cc(3),o.Sb(),o.Sb()),2&e){const e=t.$implicit,c=o.dc();o.Bb(1),o.jc("checked",e.checked)("disabled","Admin"===e.name&&"admin"===c.user.displayName),o.Bb(2),o.Dc(e.name)}}let S=(()=>{class e{constructor(e){this.bsModalRef=e,this.updateSelectedRoles=new o.n}ngOnInit(){}updateRoles(){this.updateSelectedRoles.emit(this.roles),this.bsModalRef.hide()}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(h.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-roles-modal"]],inputs:{updateSelectedRoles:"updateSelectedRoles"},decls:15,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","rolesForm"],["rolesForm","ngForm"],["class","form-check",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],[1,"form-check"],["type","checkbox","value","role.name",1,"form-check-input",3,"checked","disabled","change"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h4",1),o.Cc(2),o.Sb(),o.Tb(3,"button",2),o.bc("click",(function(){return t.bsModalRef.hide()})),o.Tb(4,"span",3),o.Cc(5,"\xd7"),o.Sb(),o.Sb(),o.Sb(),o.Tb(6,"div",4),o.Tb(7,"form",5,6),o.Ac(9,f,4,3,"div",7),o.Sb(),o.Sb(),o.Tb(10,"div",8),o.Tb(11,"button",9),o.bc("click",(function(){return t.bsModalRef.hide()})),o.Cc(12,"Cancel"),o.Sb(),o.Tb(13,"button",10),o.bc("click",(function(){return t.updateRoles()})),o.Cc(14,"Submit"),o.Sb(),o.Sb()),2&e&&(o.Bb(2),o.Ec("Edit roles for ",t.user.displayName,""),o.Bb(7),o.jc("ngForOf",t.roles))},directives:[s.u,s.l,s.m,n.l],styles:[""]}),e})();function g(e,t){if(1&e){const e=o.Ub();o.Tb(0,"tr"),o.Tb(1,"td"),o.Cc(2),o.Sb(),o.Tb(3,"td"),o.Cc(4),o.Sb(),o.Tb(5,"td"),o.Tb(6,"button",5),o.bc("click",(function(){o.uc(e);const c=t.$implicit;return o.dc().openRolesModal(c)})),o.Cc(7,"Edit Roles"),o.Sb(),o.Sb(),o.Tb(8,"td"),o.Tb(9,"button",6),o.bc("click",(function(){o.uc(e);const c=t.$implicit;return o.dc().deleteUser(c)})),o.Cc(10,"Delete User"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit;o.Bb(2),o.Dc(e.displayName),o.Bb(2),o.Dc(e.roles),o.Bb(5),o.jc("disabled",e.roles.indexOf("Admin")>-1)}}let T=(()=>{class e{constructor(e,t){this.adminService=e,this.modalService=t}ngOnInit(){this.getUsers()}getUsers(){this.adminService.getUsers().subscribe(e=>{this.users=e})}deleteUser(e){}openRolesModal(e){const t={class:"modal-dialog-centered",initialState:{user:e,roles:this.getRolesArray(e)}};this.bsModalRef=this.modalService.show(S,t),this.bsModalRef.content.updateSelectedRoles.subscribe(t=>{const c={roles:[...t.filter(e=>!0===e.checked).map(e=>e.name)]};c&&this.adminService.updateUserRoles(e.email,c.roles).subscribe(()=>{e.roles=[...c.roles]})})}getRolesArray(e){const t=[],c=e.roles;return[{name:"Admin",value:"Admin"},{name:"Employee",value:"Employee"},{name:"Customer",value:"Customer"}].forEach(e=>{let n=!1;for(const i of c)if(e.name===i){n=!0,e.checked=!0,t.push(e);break}n||(e.checked=!1,t.push(e))}),t}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(u),o.Nb(h.b))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-admin-user-management"]],decls:12,vars:1,consts:[[1,"row"],[1,"table"],[2,"width","30%"],[2,"width","20%"],[4,"ngFor","ngForOf"],[1,"btn","btn-info",3,"click"],[1,"btn","btn-info",3,"disabled","click"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"table",1),o.Tb(2,"tr"),o.Tb(3,"th",2),o.Cc(4,"Username"),o.Sb(),o.Tb(5,"th",2),o.Cc(6,"Active Roles"),o.Sb(),o.Tb(7,"th",3),o.Cc(8,"Edit"),o.Sb(),o.Tb(9,"th",3),o.Cc(10,"Delete"),o.Sb(),o.Sb(),o.Ac(11,g,11,3,"tr",4),o.Sb(),o.Sb()),2&e&&(o.Bb(11),o.jc("ngForOf",t.users))},directives:[n.l],styles:[""]}),e})();var v=c("5eHb"),y=c("gA0Q"),C=c("dZIy");const k=["brand"],w=["type"];function P(e,t){if(1&e){const e=o.Ub();o.Tb(0,"li",21),o.bc("click",(function(){o.uc(e);const c=t.$implicit;return o.dc(2).brandSelected(c)})),o.Tb(1,"a"),o.Cc(2),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit;o.kc("value",e.id),o.Bb(2),o.Dc(e.name)}}function B(e,t){if(1&e&&(o.Tb(0,"ul",19),o.Ac(1,P,3,2,"li",20),o.Sb()),2&e){const e=o.dc();o.Bb(1),o.jc("ngForOf",e.brands)}}function O(e,t){if(1&e){const e=o.Ub();o.Tb(0,"li",21),o.bc("click",(function(){o.uc(e);const c=t.$implicit;return o.dc(2).typeSelected(c)})),o.Tb(1,"a"),o.Cc(2),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit;o.kc("value",e.id),o.Bb(2),o.Dc(e.name)}}function M(e,t){if(1&e&&(o.Tb(0,"ul",19),o.Ac(1,O,3,2,"li",20),o.Sb()),2&e){const e=o.dc();o.Bb(1),o.jc("ngForOf",e.types)}}function R(e,t){if(1&e&&(o.Tb(0,"li"),o.Cc(1),o.Sb()),2&e){const e=t.$implicit;o.Bb(1),o.Ec(" ",e," ")}}function F(e,t){if(1&e&&(o.Tb(0,"ul",22),o.Ac(1,R,2,1,"li",23),o.Sb()),2&e){const e=o.dc();o.Bb(1),o.jc("ngForOf",e.errors)}}let U=(()=>{class e{constructor(e,t,c){this.fb=e,this.toastr=t,this.adminService=c,this.brands=[],this.types=[]}ngOnInit(){this.getBrands(),this.getTypes(),this.createAdminForm()}getBrands(){this.adminService.getBrands().subscribe(e=>{this.brands=e})}getTypes(){this.adminService.getTypes().subscribe(e=>{this.types=e})}createAdminForm(){this.adminForm=this.fb.group({name:[null,[s.s.required,s.s.minLength(1)]],description:[null,[s.s.required,s.s.minLength(0),s.s.maxLength(200)]],price:[null,[s.s.required,s.s.min(0),s.s.pattern("^[0-9]*$")]],pictureUrl:[null],productTypeId:[null,[s.s.required]],productType:[null,[s.s.required]],productBrandId:[null,[s.s.required]],productBrand:[null,[s.s.required]]})}brandSelected(e){this.adminForm.patchValue({productBrandId:e.id,productBrand:{name:e.name}}),this.brandInput.nativeElement.value=e.name}typeSelected(e){this.adminForm.patchValue({productTypeId:e.id,productType:{name:e.name}}),this.typeInput.nativeElement.value=e.name}onSubmit(){this.adminForm.patchValue({price:+this.adminForm.get("price").value}),this.adminService.createProduct(this.adminForm.value).subscribe(e=>{this.toastr.success("Product Successfully Created")},e=>{this.toastr.error("Could Not Create Product")})}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(s.b),o.Nb(v.b),o.Nb(u))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-admin-products"]],viewQuery:function(e,t){var c;1&e&&(o.Hc(k,!0),o.Hc(w,!0)),2&e&&(o.rc(c=o.cc())&&(t.brandInput=c.first),o.rc(c=o.cc())&&(t.typeInput=c.first))},decls:27,vars:9,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-8"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"h3","mb-3","font-weight-normal"],["formControlName","name",3,"label","type"],["formControlName","description",3,"label","type"],["formControlName","price",3,"label","type"],[1,"d-flex","flex-row","justify-content-around","mb-5"],["dropdown","",1,"btn-group"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["id","dropdown-basic","class","dropdown-menu","role","menu","aria-labelledby","button-basic","style","cursor: pointer;",4,"dropdownMenu"],["for","brand"],["brand",""],["for","type"],["type",""],["class","text-danger list-unstyled",4,"ngIf"],["type","submit",1,"btn","btn-md","btn-success","btn-block",3,"disabled"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu",2,"cursor","pointer"],["role","menuitem",3,"value","click",4,"ngFor","ngForOf"],["role","menuitem",3,"value","click"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"form",2),o.bc("ngSubmit",(function(){return t.onSubmit()})),o.Tb(3,"div",3),o.Tb(4,"h1",4),o.Cc(5,"Create Product"),o.Sb(),o.Sb(),o.Ob(6,"app-text-input",5),o.Ob(7,"app-text-input",6),o.Ob(8,"app-text-input",7),o.Tb(9,"div",8),o.Tb(10,"div",9),o.Tb(11,"button",10),o.Cc(12," Brand "),o.Ob(13,"span",11),o.Sb(),o.Ac(14,B,2,1,"ul",12),o.Sb(),o.Ob(15,"label",13,14),o.Tb(17,"div",9),o.Tb(18,"button",10),o.Cc(19," Type "),o.Ob(20,"span",11),o.Sb(),o.Ac(21,M,2,1,"ul",12),o.Sb(),o.Ob(22,"label",15,16),o.Sb(),o.Ac(24,F,2,1,"ul",17),o.Tb(25,"button",18),o.Cc(26,"Create Product"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(2),o.jc("formGroup",t.adminForm),o.Bb(4),o.jc("label","Product Name")("type","text"),o.Bb(1),o.jc("label","Description")("type","text"),o.Bb(1),o.jc("label","Price")("type","number"),o.Bb(16),o.jc("ngIf",t.errors),o.Bb(1),o.jc("disabled",t.adminForm.invalid))},directives:[s.u,s.l,s.f,y.a,s.k,s.d,C.b,C.e,C.c,n.m,n.l],styles:[""]}),e})();const j=function(){return{standalone:!0}};let A=(()=>{class e{constructor(e){this.bsModalRef=e,this.updateSelectedProduct=new o.n}ngOnInit(){}updateProduct(){this.updateSelectedProduct.emit({name:this.name,description:this.description,price:this.price}),this.bsModalRef.hide()}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(h.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-products-modal"]],inputs:{updateSelectedProduct:"updateSelectedProduct"},decls:28,vars:13,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","productForm",1,"align-middle"],["productForm","ngForm"],[1,"d-flex","flex-column"],[1,"my-2"],[1,"mr-2"],["type","text",1,"form-control","w-100",3,"ngModel","ngModelOptions","value","ngModelChange"],["type","number","min","1",1,"form-control","w-100",3,"ngModel","ngModelOptions","value","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h4",1),o.Tb(2,"strong"),o.Cc(3),o.Sb(),o.Sb(),o.Tb(4,"button",2),o.bc("click",(function(){return t.bsModalRef.hide()})),o.Tb(5,"span",3),o.Cc(6,"\xd7"),o.Sb(),o.Sb(),o.Sb(),o.Tb(7,"div",4),o.Tb(8,"form",5,6),o.Tb(10,"div",7),o.Tb(11,"div",8),o.Tb(12,"label",9),o.Cc(13,"Product Name: "),o.Sb(),o.Tb(14,"input",10),o.bc("ngModelChange",(function(e){return t.name=e})),o.Sb(),o.Sb(),o.Tb(15,"div",8),o.Tb(16,"label",9),o.Cc(17,"Product Description: "),o.Sb(),o.Tb(18,"input",10),o.bc("ngModelChange",(function(e){return t.description=e})),o.Sb(),o.Sb(),o.Tb(19,"div",8),o.Tb(20,"label",9),o.Cc(21,"Product Price: $"),o.Sb(),o.Tb(22,"input",11),o.bc("ngModelChange",(function(e){return t.price=e})),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(23,"div",12),o.Tb(24,"button",13),o.bc("click",(function(){return t.bsModalRef.hide()})),o.Cc(25,"Cancel"),o.Sb(),o.Tb(26,"button",14),o.bc("click",(function(){return t.updateProduct()})),o.Cc(27,"Submit"),o.Sb(),o.Sb()),2&e&&(o.Bb(3),o.Dc(t.product.name),o.Bb(11),o.kc("value",t.name),o.jc("ngModel",t.name)("ngModelOptions",o.mc(10,j)),o.Bb(4),o.kc("value",t.description),o.jc("ngModel",t.description)("ngModelOptions",o.mc(11,j)),o.Bb(4),o.kc("value",t.price),o.jc("ngModel",t.price)("ngModelOptions",o.mc(12,j)))},directives:[s.u,s.l,s.m,s.a,s.k,s.n,s.p],styles:["input[_ngcontent-%COMP%]{outline:0;border-width:0 0 2px;border-color:#000}input[_ngcontent-%COMP%]:focus{border-color:red}"]}),e})();function N(e,t){if(1&e){const e=o.Ub();o.Tb(0,"tr"),o.Tb(1,"td"),o.Ob(2,"img",6),o.Sb(),o.Tb(3,"td"),o.Cc(4),o.Sb(),o.Tb(5,"td"),o.Cc(6),o.ec(7,"currency"),o.Sb(),o.Tb(8,"td"),o.Tb(9,"button",7),o.bc("click",(function(){o.uc(e);const c=t.$implicit;return o.dc().openProductModal(c)})),o.Cc(10,"Edit Product"),o.Sb(),o.Sb(),o.Tb(11,"td"),o.Tb(12,"button",7),o.bc("click",(function(){o.uc(e);const c=t.$implicit;return o.dc().deleteProduct(c)})),o.Cc(13,"Delete Product"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit;o.Bb(2),o.kc("src",e.pictureUrl,o.wc),o.kc("alt",e.name),o.Bb(2),o.Dc(e.name),o.Bb(2),o.Dc(o.fc(7,4,e.price))}}let x=(()=>{class e{constructor(e,t,c){this.adminService=e,this.modalService=t,this.toastr=c}ngOnInit(){this.getProducts()}getProducts(){this.adminService.getProducts().subscribe(e=>{this.products=e})}openProductModal(e){this.bsModalRef=this.modalService.show(A,{class:"modal-dialog-centered",initialState:{product:e,name:e.name,description:e.description,price:e.price}}),this.bsModalRef.content.updateSelectedProduct.subscribe(t=>{this.adminService.updateProduct(e.id,{name:t.name,description:t.description,price:t.price}).subscribe(()=>{this.getProducts()})})}deleteProduct(e){this.adminService.deleteProduct(e.id).subscribe(e=>{e?(this.toastr.success("Deleted Successfully"),this.getProducts()):this.toastr.error("Failed to delete")})}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(u),o.Nb(h.b),o.Nb(v.b))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-admin-delete-product"]],decls:13,vars:1,consts:[[1,"row"],[1,"table"],[2,"width","20%"],[2,"width","35%"],[2,"width","15%"],[4,"ngFor","ngForOf"],[1,"img-fluid","bg-light",3,"src","alt"],[1,"btn","btn-info",3,"click"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"table",1),o.Tb(2,"tr"),o.Ob(3,"th",2),o.Tb(4,"th",3),o.Cc(5,"Name"),o.Sb(),o.Tb(6,"th",4),o.Cc(7,"Price"),o.Sb(),o.Tb(8,"th",4),o.Cc(9,"Edit"),o.Sb(),o.Tb(10,"th",4),o.Cc(11,"Delete"),o.Sb(),o.Sb(),o.Ac(12,N,14,6,"tr",5),o.Sb(),o.Sb()),2&e&&(o.Bb(12),o.jc("ngForOf",t.products))},directives:[n.l],pipes:[n.d],styles:["img[_ngcontent-%COMP%]{max-width:50%;height:auto}"]}),e})();function I(e,t){1&e&&(o.Tb(0,"tab",7),o.Tb(1,"div",8),o.Ob(2,"app-admin-user-management"),o.Sb(),o.Sb())}function D(e,t){1&e&&(o.Tb(0,"tab",9),o.Tb(1,"div",8),o.Ob(2,"app-admin-products"),o.Sb(),o.Sb())}function E(e,t){1&e&&(o.Tb(0,"tab",10),o.Tb(1,"div",8),o.Ob(2,"app-admin-delete-product"),o.Sb(),o.Sb())}const H=function(){return["Admin"]},$=function(){return["Admin","Employee"]},q=[{path:"",component:(()=>{class e{constructor(e,t){this.fb=e,this.adminService=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(s.b),o.Nb(u))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-admin"]],decls:7,vars:6,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"admin-tabset"],["heading","User Management",4,"appHasRole"],["heading","Create Product","id","tab1",4,"appHasRole"],["heading","Edit Product",4,"appHasRole"],["heading","User Management"],[1,"container"],["heading","Create Product","id","tab1"],["heading","Edit Product"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.Tb(3,"tabset",3),o.Ac(4,I,3,0,"tab",4),o.Ac(5,D,3,0,"tab",5),o.Ac(6,E,3,0,"tab",6),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(4),o.jc("appHasRole",o.mc(3,H)),o.Bb(1),o.jc("appHasRole",o.mc(4,$)),o.Bb(1),o.jc("appHasRole",o.mc(5,$)))},directives:[p.c,m.a,p.a,T,U,x],styles:[""]}),e})()}];let L=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[n.c,r.g.forChild(q)],r.g]}),e})(),X=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[n.c,i.a,L]]}),e})()}}]);